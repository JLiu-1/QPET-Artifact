<!-- manual page source format generated by PolyglotMan v3.0.4, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>QccWAVPerceptualWeightsRemove.3</TITLE>
</HEAD>
<BODY>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">NAME </A></H2>
QccWAVPerceptualWeights - data structure for perceptual weighting 
of subbands  
<H2><A NAME="sect1" HREF="#toc1">SYNOPSIS </A></H2>
<B>#include "libQccPack.h"</B>  <P>
<B>int QccWAVPerceptualWeightsInitialize(QccWAVPerceptualWeights 
*</B><I>perceptual_weights</I><B>);</B>  <BR>
<B>int QccWAVPerceptualWeightsAlloc(QccWAVPerceptualWeights 
*</B><I>perceptual_weights</I><B>);</B>  <BR>
<B>void QccWAVPerceptualWeightsFree(QccWAVPerceptualWeights 
*</B><I>perceptual_weights</I><B>);</B>  <BR>
<B>int QccWAVPerceptualWeightsRead(QccWAVPerceptualWeights 
*</B><I>perceptual_weights</I><B>);</B>  <BR>
<B>int QccWAVPerceptualWeightsWrite(const QccWAVPerceptualWeights 
*</B><I>perceptual_weights</I><B>);</B>  <BR>
<B>int QccWAVPerceptualWeightsPrint(const QccWAVPerceptualWeights 
*</B><I>perceptual_weights</I><B>);</B>  <BR>
<B>int QccWAVPerceptualWeightsApply(QccWAVSubbandPyramid 
*</B><I>subband_pyramid</I><B>, const QccWAVPerceptualWeights *</B><I>perceptual_weights</I><B>);</B> 
 <BR>
<B>int QccWAVPerceptualWeightsRemove(QccWAVSubbandPyramid *</B><I>subband_pyramid</I><B>, 
const QccWAVPerceptualWeights *</B><I>perceptual_weights</I><B>);</B>  
<H2><A NAME="sect2" HREF="#toc2">DESCRIPTION </A></H2>
QccPack 
provides data structure <B>QccWAVPerceptualWeights</B> for the perceptual weighting 
of the subbands in a dyadic subband pyramid (data type <B>QccWAVSubbandPyramid</B>) 
decomposition of an image. The <B>QccWAVPerceptualWeights</B> structure contains 
a list of weighting factors, one for each subband of a subband pyramid. 
 These weights can be applied to a <B>QccWAVSubbandPyramid</B> structure to give 
each subband weight appropriate to the relative perceptual importance 
of that subband, as established by perceptual tests with human observers. 
The values used as perceptual weights by <B>QccPack</B> are the reciprocals of 
the just-noticeable distortions (JND) for the subbands (see Hontsch <I>et 
al</I>.).  
<H2><A NAME="sect3" HREF="#toc3">DATA STRUCTURE </A></H2>
The <B>QccWAVPerceptualWeights</B> data structure is defined 
as:  <blockquote><P>
 typedef struct <BR>
 { <BR>
   QccString filename; <BR>
   QccString magic_num; 
<BR>
   int major_version; <BR>
   int minor_version; <BR>
   int num_subbands; <BR>
   QccVector 
perceptual_weights; <BR>
 } QccWAVPerceptualWeights; <BR>
  </blockquote>
<P>
The fields of <B>QccWAVPerceptualWeights</B> 
are as follows: 
<DL>

<DT><I>filename</I>  </DT>
<DD>The name of the file. </DD>

<DT><I>magic_num</I>, <I>major_version</I>, 
<I>minor_version</I>  </DT>
<DD>The magic number and version of the file. </DD>

<DT><I>num_subbands</I>  
</DT>
<DD>The number perceptual weight in <I>perceptual_weights</I>. </DD>

<DT><I>perceptual_weights</I> 
 </DT>
<DD>The perceptual weights. </DD>
</DL>
 
<H2><A NAME="sect4" HREF="#toc4">FILE FORMAT </A></H2>
For reading and writing structures 
of type <B>QccWAVPerceptualWeights</B>, QccPack provides the <B>PCP</B> file format. 
This file format starts with an ASCII header followed by ASCII data. The 
ASCII header consists of magic-number/revision information followed by 
any amount of white space (space, `\t' (tab), `\n' (newline), `\r' (return)) and/or 
comments lines (lines starting with `#').  Following this white space, additional 
ASCII header information is given, separated by blanks and newlines. ASCII 
data follows this ASCII header information. <P>
The <B>PCP</B> file format consists 
of the following information:  <blockquote> <P>
<B>PCP</B><I>X.X</I>  <BR>
<I>&lt;white space&gt;</I>                    
                                 <BR>
<I>N</I>  <BR>
<I>w1 w2</I>...  <P>
 </blockquote>
where <I>N</I> is the number of perceptual 
weights contained in the file (which is equal to the number of subbands 
in the subband pyramid for which the file is to be used). The perceptual 
weights follow, each stored as a double in ASCII, separated by blanks 
and/or CRs.  
<H2><A NAME="sect5" HREF="#toc5">ROUTINES </A></H2>
<B>QccWAVPerceptualWeightsInitialize()</B> should be called 
before any use of a <B>QccWAVPerceptualWeights</B> structure. <B>QccWAVPerceptualWeightsInitialize()</B> 
initializes the fields of <I>perceptual_weights</I> to the following values: 
 <blockquote><P>
 <I>filename</I>: <B>NULL</B> string  <BR>
<I>magic_num</I>: <B>QCCPERCEPTUALWEIGHTS_MAGICNUM</B>  <BR>
<I>major_version</I>, 
<I>minor_version</I>: initialized to output of  <B><A HREF="QccGetQccPackVersion.3.html">QccGetQccPackVersion</B>(3)</A>
  <BR>
<I>num_subbands</I>: 
0  <BR>
<I>perceptual_weights</I>: <B>NULL</B>  </blockquote>
<P>
<B>QccWAVPerceptualWeightsAlloc()</B> allocates 
storage space for the <I>perceptual_weights-&gt;perceptual_weights</I> array. If  <I>perceptual_weights-&gt;perceptual_weights</I> 
is not <B>NULL</B>, <B>QccWAVPerceptualWeightsAlloc()</B> returns immediately without 
changing the state of any memory allocation. Otherwise, the  <I>perceptual_weights-&gt;perceptual_weights</I> 
array is allocated. The value for <I>num_subbands</I> must be set prior to calling 
<B>QccWAVPerceptualWeightsAlloc()</B>. <P>
<B>QccWAVPerceptualWeightsFree()</B> frees the 
<I>perceptual_weights-&gt;perceptual_weights</I> array previously allocated by <B>QccWAVPerceptualWeightsAlloc()</B>. 
<P>
<B>QccWAVPerceptualWeightsRead()</B> reads perceptual weights from the  <B>PCP</B>-format 
file given by <I>perceptual_weights-&gt;filename</I>, which must be set before calling 
<B>QccWAVPerceptualWeightsRead()</B>. <B>QccWAVPerceptualWeightsRead()</B> searches the 
path given by the environment variable <B>QCCPACK_WAVELET_PATH</B> for a file 
whose name matches <I>perceptual_weights-&gt;filename</I>. The contents of the first 
such file found are read into <I>perceptual_weight-&gt;perceptual_weights</I>. If  
<I>perceptual_weights-&gt;perceptual_weights</I> is  <B>NULL</B>, <I>perceptual_weights-&gt;perceptual_weights</I> 
is allocated via a call to  <B>QccWAVPerceptualWeightsAlloc()</B> prior to reading; 
otherwise, it is assumed that sufficient space has already been allocated. 
<P>
<B>QccWAVPerceptualWeightsWrite()</B> writes the  <B>PCP</B>-format file whose filename 
is given by  <I>perceptual_weights-&gt;filename</I>. <I>perceptual_weights-&gt;perceptual_weights</I> 
is assumed to be allocated and to contain all <I>perceptual_weights-&gt;num_subbands</I> 
weight values. <P>
<B>QccWAVPerceptualWeightsPrint()</B> prints a format output list 
of <I>perceptual_weights-&gt;perceptual_weights</I> to stdout. <P>
<B>QccWAVPerceptualWeightsApply()</B> 
applies the perceptual weights given in <I>perceptual_weights</I> to <I>subband_pyramid</I> 
by multiplying each wavelet coefficient in <I>subband_pyramid-&gt;matrix</I> with 
the appropriate weight value (as determined by the subband in which the 
coefficient resides) from <I>perceptual_weights-&gt;perceptual_weights</I>. The number 
of subbands specified by <I>perceptual_weights</I> must match that specified 
by <I>subband_pyramid</I>. <P>
<B>QccWAVPerceptualWeightsRemove()</B> performs the reverse 
operation of <B>QccWAVPerceptualWeightsApply()</B>; namely, each coefficient 
in  <I>subband_pyramid-&gt;matrix</I> is divided by the appropriate weight in <I>perceptual_weights-&gt;perceptual_weights</I>. 
 
<H2><A NAME="sect6" HREF="#toc6">RETURN VALUE </A></H2>
These routines return 0 on success, and 1 on failure.  
<H2><A NAME="sect7" HREF="#toc7">SEE 
ALSO </A></H2>
<B><A HREF="QccPackWAV.3.html">QccPackWAV</B>(3)</A>
, <B><A HREF="QccWAVSubbandPyramid.3.html">QccWAVSubbandPyramid</B>(3)</A>
, <B><A HREF="QccPack.3.html">QccPack</B>(3)</A>
 <P>
I. Hontsch, L. J. 
Karam, and R, J. Safranek, "A Perceptually Tuned Embedded Zerotree Image 
Coder," in  <I>Proceedings of the International Conference on Image Processing</I> 
, vol. 1, pp. 41-44, Oct. 1997. <P>
N. Jayant, J. Johnston, and R. Safranek, "Signal 
Compression Based on Models of Human Perception," <I>Proceedings of the IEEE</I>, 
vol. 81, no. 10, pp. 1385-1422, Oct. 1993.  
<H2><A NAME="sect8" HREF="#toc8">AUTHOR </A></H2>
Copyright (C) 1997-2016  James 
E. Fowler  <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">NAME</A></LI>
<LI><A NAME="toc1" HREF="#sect1">SYNOPSIS</A></LI>
<LI><A NAME="toc2" HREF="#sect2">DESCRIPTION</A></LI>
<LI><A NAME="toc3" HREF="#sect3">DATA STRUCTURE</A></LI>
<LI><A NAME="toc4" HREF="#sect4">FILE FORMAT</A></LI>
<LI><A NAME="toc5" HREF="#sect5">ROUTINES</A></LI>
<LI><A NAME="toc6" HREF="#sect6">RETURN VALUE</A></LI>
<LI><A NAME="toc7" HREF="#sect7">SEE ALSO</A></LI>
<LI><A NAME="toc8" HREF="#sect8">AUTHOR</A></LI>
</UL>
<p><br><br><a href="http://sourceforge.net/projects/qccpack"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=5992&type=6" width="210" height="62" border="0" alt="Get QccPack at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a></body></html>
