.TH MEMC 1 "QCCPACK" ""
.SH NAME
memc \- 
full-search, block-based motion estimation and compensation
.SH SYNOPSIS
.B memc 
.RB "[\|" \-fp "\|]"
.RB "[\|" \-hp "\|]"
.RB "[\|" \-qp "\|]"
.RB "[\|" \-ep "\|]"
.RB "[\|" \-f1 
.IR filter1 "\|]"
.RB "[\|" \-f2 
.IR filter2 "\|]"
.RB "[\|" \-f3 
.IR filter3 "\|]"
.RB "[\|" \-w
.IR window "\|]" 
.RB "[\|" \-b
.IR block_size "\|]" 
.RB "[\|" \-mc
.IR motion_compensated_frame "\|]" 
.RB "[\|" \-srf
.IR subpixel_reference_frame "\|]" 
.RB "[\|" \-r
.IR residual_frame "\|]" 
.I reference_frame current_frame mvfile
.SH DESCRIPTION
.TP
.B \-fp
Full-pixel accuracy.
.TP
.B \-hp
Half-pixel accuracy.
.TP
.B \-qp
Quarter-pixel accuracy.
.TP
.B \-ep
Eighth-pixel accuracy.
.TP
.BI \-f1 " filter1"
String. Filename of filter to use
for going from full-pixel to half-pixel accuracy.
.TP
.BI \-f2 " filter2"
String. Filename of filter to use
for going from half-pixel to quarter-pixel accuracy.
.TP
.BI \-f3 " filter3"
String. Filename of filter to use
for going from quarter-pixel to eighth-pixel accuracy.
.TP
.BI \-w " window"
Integer. Window size for motion estimation. Default is 15 pixels.
.TP
.BI \-b " block_size"
Integer. Block size. Default is 16 pixels.
.TP
.BI \-mc " motion_compensated_frame"
String. Filename of file to which to write the motion-compensated frame.
.TP
.BI \-srf " subpixel_reference_frame"
String. Filename of file to which to write the reference frame after
having been interpolated to the specified subpixel accuracy.
.TP
.BI \-r " residual_frame"
String. Filename of file to which to write the difference between
the current frame and the motion-compensated frame, the residual image
from the motion-compensation process.
.SH DESCRIPTION
.B memc
reads two images, a
.I current_frame
and a
.IR reference_frame ,
performing full-search, block-based motion estimation to estimate
motion from
.I reference_frame
to
.IR current_frame .
That is, for each block in
.IR current_frame ,
every block in a window surrounding the current-block location
in
.IR reference_frame
is searched, and the best-matching block chosen.
The size of the blocks to use for matching is given by
.I block_size
(default is 16); and the size of the window in which to perform
the block-matching search is
.IR window
(default is 15).
.LP
.BR memc
first interpolates
.I reference_frame
to the specified subpixel accuracy as determined by the
.BR \-fp ,
.BR \-hp ,
.BR \-qp ,
or
.BR \-ep 
options. In the case that none of these options are specified,
.BR memc
defaults to using full-pixel accuracy.
.BR QccVIDMotionEstimationCreateReferenceFrame (3)
is used to perform the subpixel-accuracy interpolation, with
.IR filter1 ,
.IR filter2 ,
and
.IR filter3
provided to the latter routine if specified
.RI ( filter1 ,
.IR filter2 ,
and
.IR filter3
should be files whose format is described with
.BR QccFilterRead (3)).
Next,
.BR QccVIDMotionEstimationFullSearch (3)
is called to carry out the full-search, block-based motion estimation.
.BR QccVIDMotionVectorsWriteFile (3)
then writes the resulting motion vectors to
.IR mvfile .
.LP
If the
.BR \-mc
option is specified,
.BR QccVIDMotionEstimationCreateCompensatedFrame (3)
is called to generate the motion-compensated frame using the
motion vectors that resulted from the full-search, block-based
motion search. This compensated frame is then written to
.IR motion_compensated_frame .
.LP
If the
.BR \-srf
option is specified,
the interpolated, subpixel-accurate reference frame (as generated by
.BR QccVIDMotionEstimationCreateReferenceFrame (3))
is written to
.IR reference_frame .
.LP
If the
.BR \-r
option is specified,
the residual image between the current frame and the motion-compensated
frame is written to
.IR residual_frame .
This residual is not the true difference image, but rather the absolute
value of the difference image, in order to avoid negative-valued
pixels.
.SH "SEE ALSO"
.BR QccVIDMotionEstimationFullSearch (3),
.BR QccVIDMotionEstimationCreateReferenceFrame (3),
.BR QccVIDMotionEstimationCreateCompensatedFrame (3),
.BR QccVIDMotionVectorsWriteFile (3),
.BR QccFilterRead (3),
.BR QccPackVID (3),
.BR QccPackIMG (3),
.BR QccPack (3)

.SH AUTHOR
Copyright (C) 1997-2016  James E. Fowler
.\"  The programs herein are free software; you can redistribute them and/or
.\"  modify them under the terms of the GNU General Public License
.\"  as published by the Free Software Foundation; either version 2
.\"  of the License, or (at your option) any later version.
.\"  
.\"  These programs are distributed in the hope that they will be useful,
.\"  but WITHOUT ANY WARRANTY; without even the implied warranty of
.\"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"  GNU General Public License for more details.
.\"  
.\"  You should have received a copy of the GNU General Public License
.\"  along with these programs; if not, write to the Free Software
.\"  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
