<!-- manual page source format generated by PolyglotMan v3.0.4, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>QccVIDMotionEstimationMAE.3</TITLE>
</HEAD>
<BODY>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">NAME </A></H2>
QccVIDMotionEstimationMAE, QccVIDMotionEstimationExtractBlock, QccVIDMotionEstimationInsertBlock, 
QccVIDMotionEstimationFullSearch, QccVIDMotionEstimationCalcReferenceFrameSize, 
QccVIDMotionEstimationCreateReferenceFrame, QccVIDMotionEstimationCreateCompensatedFrame 
- routines for full-search, block-based motion estimation and compensation 
 
<H2><A NAME="sect1" HREF="#toc1">SYNOPSIS </A></H2>
<B>#include "libQccPack.h"</B>  <P>
<B>double QccVIDMotionEstimationMAE(QccMatrix 
</B><I>current_block</I><B>, QccMatrix </B><I>reference_block</I><B>, int </B><I>block_size</I><B>);</B>  <BR>
 <P>
<B>int QccVIDMotionEstimationExtractBlock(const 
QccIMGImageComponent *</B><I>image</I><B>, double </B><I>row</I><B>, double </B><I>col</I><B>, QccMatrix </B><I>block</I><B>, 
int </B><I>block_size</I><B>, int </B><I>subpixel_accuracy</I><B>);</B>  <BR>
 <P>
<B>int QccVIDMotionEstimationInsertBlock(QccIMGImageComponent 
*</B><I>image</I><B>, double </B><I>row</I><B>, double </B><I>col</I><B>, const QccMatrix </B><I>block</I><B>, int </B><I>block_size</I><B>, 
int </B><I>subpixel_accuracy</I><B>);</B>  <BR>
 <P>
<B>int QccVIDMotionEstimationFullSearch(const QccIMGImageComponent 
*</B><I>current_frame</I><B>, const QccIMGImageComponent *</B><I>reference_frame</I><B>, QccIMGImageComponent 
*</B><I>motion_vectors_horizontal</I><B>, QccIMGImageComponent *</B><I>motion_vectors_vertical</I><B>, 
int </B><I>block_size</I><B>, int </B><I>window_size</I><B>, int </B><I>subpixel_accuracy</I><B>);</B>  <BR>
 <P>
<B>int QccVIDMotionEstimationCalcReferenceFrameSize(int 
</B><I>num_rows</I><B>, int </B><I>num_cols</I><B>, int *</B><I>reference_num_rows</I><B>, int *</B><I>reference_num_cols</I><B>, 
int </B><I>subpixel_accuracy</I><B>);</B>  <BR>
 <P>
<B>int QccVIDMotionEstimationCreateReferenceFrame(const 
QccIMGImageComponent *</B><I>current_frame</I><B>, QccIMGImageComponent *</B><I>reference_frame</I><B>, 
int </B><I>subpixel_accuracy</I><B>, const QccFilter *</B><I>filter1</I><B>, const QccFilter *</B><I>filter2</I><B>, 
const QccFilter *</B><I>filter3</I><B>);</B>  <BR>
 <P>
<B>int QccVIDMotionEstimationCreateCompensatedFrame(QccIMGImageComponent 
*</B><I>motion_compensated_frame</I><B>, const QccIMGImageComponent *</B><I>reference_frame</I><B>, 
const QccIMGImageComponent *</B><I>motion_vectors_horizontal</I><B>, const QccIMGImageComponent 
*</B><I>motion_vectors_vertical</I><B>, int </B><I>block_size</I><B>, int </B><I>subpixel_accuracy</I><B>);</B>  
<H2><A NAME="sect2" HREF="#toc2">DESCRIPTION 
</A></H2>
<B>QccVIDMotionEstimationMAE()</B> calculates the mean absolute error (MAE) between 
<I>current_block</I> and <I>reference_block</I> where both blocks have a block size 
of <I>block_size</I> by <I>block_size</I>. <P>
<B>QccVIDMotionEstimationExtractBlock()</B> extracts 
a <I>block</I> of size <I>block_size</I> by <I>block_size</I> from <I>image</I>. The block is extracted 
from location (<I>row</I>, <I>col</I>),<I></I> where this location is the upper-left corner 
of the block to extact. <I>subpixel_accuracy</I> is one of <B>QCCVID_ME_FULLPIXEL</B>, 
<B>QCCVID_ME_HALFPIXEL</B>, <B>QCCVID_ME_QUARTERPIXEL</B>, or  <B>QCCVID_ME_EIGHTHPIXEL</B>, 
indicating full-, half-, quarter-, or eighth-pixel accuracy. Unless the accuracy 
is full-pixel, <I>image</I> is assumed to be interpolated to support motion-estimation 
at the specified accuracy (using <B>QccVIDMotionEstimationCreateReferenceFrame()</B> 
described below). Unless the accuracy is full-pixel, <I>row</I> and <I>col</I> refer to 
the location in the original image, not the interpolated image. <P>
<B>QccVIDMotionEstimationInsertBlock()</B> 
does the inverse of <B>QccVIDMotionEstimationExtractBlock()</B>; that is, it 
inserts <I>block</I> into the specified location in <I>image</I>. <P>
<B>QccVIDMotionEstimationFullSearch()</B> 
does full-search, block-based motion estimation in <I>current_frame</I> using <I>reference_frame</I> 
as the reference frame. That is, for each block in <I>current_frame</I>, every 
block in a window surrounding the current-block location in <I>reference_frame</I> 
is searched, and the best-matching block chosen. The motion vectors indicating 
the displacement from the blocks in <I>current_frame</I> to their matching blocks 
in <I>reference_frame</I> are returned in <I>motion_vectors_horizontal</I> and <I>motion_vectors_vertical</I>, 
which are the horizontal and vertical components of the motion vectors, 
respectively. <I>block_size</I> gives the size of the blocks to match. <I>window_size</I> 
gives the size of the window to search in <I>reference_frame</I> (<I>window_size</I> 
should be positive, so that the search window is <I>-window_size</I> to <I>+window_size</I>)<I>.</I> 
<I>subpixel_accuracy</I> is one of <B>QCCVID_ME_FULLPIXEL</B>, <B>QCCVID_ME_HALFPIXEL</B>, 
<B>QCCVID_ME_QUARTERPIXEL</B>, or  <B>QCCVID_ME_EIGHTHPIXEL</B>, indicating full-, half-, 
quarter-, or eighth-pixel motion-estimation accuracy. It is assumed that <I>reference_frame</I> 
is already interpolated to support the specified accuracy using <B>QccVIDMotionEstimationCreateReferenceFrame()</B>. 
<P>
<B>QccVIDMotionEstimationCalcReferenceFrameSize()</B> returns the size that a 
reference frame needs to be to support motion-estimation accuracy of the 
specified <I>subpixel_accuracy</I>. <I>num_rows</I> and <I>num_cols</I> give the original size 
of the frame; the size of the interpolated reference frame is returned 
in <I>reference_num_rows</I> and <I>reference_num_cols</I>. <P>
<B>QccVIDMotionEstimationCreateReferenceFrame()</B> 
interpolates <I>current_frame</I> into <I>reference_frame</I> at the specified <I>subpixel_accuracy</I>. 
If <I>subpixel_accuracy</I> is <B>QCCVID_ME_FULLPIXEL</B>, <I>current_frame</I> is simply copied 
into <I>reference_frame</I>. If <I>subpixel_accuracy</I> is <B>QCCVID_ME_HALFPIXEL</B>, and 
<I>filter1</I> is not <B>NULL</B>, then <I>current_frame</I> is filtered into <I>reference_frame</I> 
using <B><A HREF="QccIMGImageComponentInterpolateFilter.3.html">QccIMGImageComponentInterpolateFilter</B>(3)</A>
. On the other hand, if <I>filter1</I> 
is <B>NULL</B>, then bilinear interpolation is performed via <B><A HREF="QccIMGImageComponentInterpolateBilinear.3.html">QccIMGImageComponentInterpolateBilinear</B>(3)</A>
. 
Similarly, if <I>subpixel_accuracy</I> is <B>QCCVID_ME_QUARTERPIXEL</B>, then <I>filter1</I> 
and <I>filter2</I> determine whether bilinear or filtered interpolation is used 
to go from full-pixel to half-pixel accuracy (<I>filter1</I>),<I></I> and from half-pixel 
to quarter-pixel accuracy (<I>filter2</I>).<I></I> Likewise, <I>filter3</I> determines whether 
bilinear or filtered interpolation is used in going from quarter-pixel 
to eighth-pixel accuracy when <I>subpixel_accuracy</I> is <B>QCCVID_ME_EIGHTHPIXEL</B>. 
<P>
<B>QccVIDMotionEstimationCreateCompensatedFrame()</B> extracts blocks from <I>reference_frame</I> 
to create <I>motion_compensated_frame</I>, where the blocks are extracted according 
to the specified motion field as given by <I>motion_vectors_horizontal</I> and 
<I>motion_vectors_vertical</I>. <I>block_size</I> gives the size of the blocks, and <I>subpixel_accuracy</I> 
indicates the subpixel accuracy of <I>reference_frame</I>. It is assumed that 
<I>reference_frame</I> is interpolated with <B>QccVIDMotionEstimationCreateReferenceFrame()</B> 
to the specified <I>subpixel_accuracy</I>.  
<H2><A NAME="sect3" HREF="#toc3">RETURN VALUE </A></H2>
These routines return 
0 on success, and 1 on failure.  
<H2><A NAME="sect4" HREF="#toc4">SEE ALSO </A></H2>
<B><A HREF="QccVIDMotionVectorsEncode.3.html">QccVIDMotionVectorsEncode</B>(3)</A>
, 
<B><A HREF="QccVIDMotionVectorsDecode.3.html">QccVIDMotionVectorsDecode</B>(3)</A>
, <B><A HREF="memc.1.html">memc</B>(1)</A>
, <B><A HREF="QccPackVID.3.html">QccPackVID</B>(3)</A>
, <B><A HREF="QccPackENT.3.html">QccPackENT</B>(3)</A>
, <B><A HREF="QccPack.3.html">QccPack</B>(3)</A>
 
 
<H2><A NAME="sect5" HREF="#toc5">AUTHOR </A></H2>
Copyright (C) 1997-2016  James E. Fowler <P>
  <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">NAME</A></LI>
<LI><A NAME="toc1" HREF="#sect1">SYNOPSIS</A></LI>
<LI><A NAME="toc2" HREF="#sect2">DESCRIPTION</A></LI>
<LI><A NAME="toc3" HREF="#sect3">RETURN VALUE</A></LI>
<LI><A NAME="toc4" HREF="#sect4">SEE ALSO</A></LI>
<LI><A NAME="toc5" HREF="#sect5">AUTHOR</A></LI>
</UL>
<p><br><br><a href="http://sourceforge.net/projects/qccpack"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=5992&type=6" width="210" height="62" border="0" alt="Get QccPack at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a></body></html>
