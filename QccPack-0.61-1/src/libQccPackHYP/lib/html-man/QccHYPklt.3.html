<!-- manual page source format generated by PolyglotMan v3.0.4, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>QccHYPklt.3</TITLE>
</HEAD>
<BODY>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">NAME </A></H2>
QccHYPklt -  data structure <B>QccHYPklt</B> for spectral KLT transform 
 
<H2><A NAME="sect1" HREF="#toc1">SYNOPSIS </A></H2>
<B>#include "libQccPack.h"</B>  <P>
<B>int QccHYPkltInitialize(QccHYPklt *</B><I>klt</I><B>);</B> 
 <BR>
<B>int QccHYPkltAlloc(QccHYPklt *</B><I>klt</I><B>);</B>  <BR>
<B>void QccHYPkltFree(QccHYPklt *</B><I>klt</I><B>);</B> 
 <BR>
<B>int QccHYPkltPrint(const QccHYPklt *</B><I>klt</I><B>);</B>  <BR>
<B>int QccHYPkltRead(QccHYPklt 
*</B><I>klt</I><B>);</B>  <BR>
<B>int QccHYPkltWrite(const QccHYPklt *</B><I>klt</I><B>);</B>  
<H2><A NAME="sect2" HREF="#toc2">DESCRIPTION </A></H2>
QccPack 
provides data structure <B>QccHYPklt</B> for representing a KLT transform. <P>
The 
components of a <B>QccHYPklt</B> structure are a vector representing the dataset 
mean and a matrix representing the transform itself, as determined by 
a singular value decomposition of the dataset's covariance matrix.  
<H2><A NAME="sect3" HREF="#toc3">DATA 
STRUCTURE </A></H2>
The <B>QccHYPklt</B> data structure is defined as:  <blockquote><P>
 typedef struct 
<BR>
 { <BR>
   QccString filename; <BR>
   QccString magic_num; <BR>
   int major_version; 
<BR>
   int minor_version; <BR>
   int num_bands; <BR>
   QccVector mean; <BR>
   QccMatrix 
matrix; <BR>
 } QccHYPklt; <BR>
  </blockquote>
<P>
The fields of <B>QccHYPklt</B> are as follows: 
<DL>

<DT><I>filename</I> 
 </DT>
<DD>The name of the file. </DD>

<DT><I>magic_num</I>, <I>major_version</I>, <I>minor_version</I>  </DT>
<DD>The magic 
number and version of the file. </DD>

<DT><I>num_bands</I>  </DT>
<DD>The number of spectral bands 
the KLT is designed for. </DD>

<DT><I>mean</I>  </DT>
<DD>The mean vector (length = <I>num_bands</I>). </DD>

<DT><I>matrix</I> 
 </DT>
<DD>The transform matrix (size =  <I>num_bands</I> x <I>num_bands</I>). </DD>
</DL>
 
<H2><A NAME="sect4" HREF="#toc4">FILE FORMAT </A></H2>
For 
reading and writing structures of type <B>QccHYPklt</B>, QccPack provides the 
<B>KLT</B> file format. This file format starts with an ASCII header followed 
by binary data. The ASCII header consists of magic-number/revision information 
followed by any amount of white space (space, `\t' (tab), `\n' (newline), `\r' 
(return)) and/or comments lines (lines starting with `#').  Following this 
white space, additional ASCII header information is given, separated by 
blanks and newlines. Binary data follows this ASCII header information. 
<P>
The <B>KLT</B> file format consists of the following information:  <blockquote> <P>
<B>KLT</B><I>X.X</I>  <BR>
<I>&lt;white 
space&gt;</I>  <BR>
<I>num_bands</I>  <BR>
<I>mean</I>  <BR>
.  <BR>
.  <BR>
.  <BR>
<I>matrix</I>  <BR>
.  <BR>
.  <BR>
.  <BR>
 <P>
 </blockquote>
where <B>KLT</B> is the magic number, 
<I>X.X</I> is the version number, <I>&lt;white space&gt;</I> is white space and/or  comment lines, 
 <I>num_bands</I> is the number of bands, <I>mean</I> are the elements of the mean vector, 
and <I>matrix</I> are the elements of the transform matrix. <I>num_bands</I> is stored 
in ASCII, while the <I>mean</I> and <I>matrix</I> values are stored as binary (4 bytes, 
MSB first, see <B><A HREF="QccFileWriteDouble.3.html">QccFileWriteDouble</B>(3)</A>
). No white space may exist between 
the  <I>mean</I> and <I>matrix</I> values.  
<H2><A NAME="sect5" HREF="#toc5">ROUTINES </A></H2>
<B>QccHYPkltInitialize()</B> should be 
called before any use of a <B>QccHYPklt</B> structure. <B>QccHYPkltInitialize()</B> initializes 
the fields of <I>klt</I> to the following values:  <blockquote><P>
 <I>filename</I>: <B>NULL</B> string  <BR>
<I>magic_num</I>: 
<B>QCCFILTERBANK_MAGICNUM</B>  <BR>
<I>major_version</I>, <I>minor_version</I>: initialized to output 
of  <B><A HREF="QccGetQccPackVersion.3.html">QccGetQccPackVersion</B>(3)</A>
  <BR>
<I>num_bands</I>: 0  <BR>
<I>mean</I>: <B>NULL</B>  <BR>
<I>matrix</I>: <B>NULL</B>  <BR>
 
</blockquote>
<P>
<B>QccHYPkltAlloc()</B> allocates the <I>mean</I> and <I>matrix</I> fields of the KLT. <I>num_bands</I> 
must be set prior to calling <B>QccHYPkltAlloc()</B>. <P>
<B>QccHYPkltFree()</B> frees the 
 <I>mean</I> and <I>matrix</I> fields of <I>klt</I>. <P>
<B>QccHYPkltPrint()</B> prints the contents of 
<I>klt</I> to stdout. <P>
<B>QccHYPkltRead()</B> reads a <B>QccHYPklt</B> structure from a file; 
the filename of the <B>KLT</B>-format file to be read must be stored as <I>klt-&gt;filename</I>. 
<P>
<B>QccHYPkltWrite()</B> writes a <B>QccHYPklt</B> structure to a file; the filename 
of the <B>KLT</B>-format file to be written must be stored as <I>klt-&gt;filename</I>.  
<H2><A NAME="sect6" HREF="#toc6">THEORY 
</A></H2>
The Karhunen-Loève transform (KLT) is a data-dependent linear transform 
that is optimal in the sense that it packs the most signal energy into 
a given number of transform coefficients. <P>
The KLT is often used for spectral 
decorrelation in a hyperspectral image. Let <I>X</I> be a collection of pixel 
vectors; i.e., <I>X</I> is a <I>num_bands</I> x <I>num_pixels</I> matrix, where <I>num_bands</I> is 
the number of spectral bands in the hyperspectral image. Let <I>u</I> be the mean 
vector of the pixel vectors (a <I>num_bands</I> x 1 vector). The covariance matrix 
<I>R</I> of <I>X</I> is then <I>R</I> = <I>X</I>*<I>X</I>^T/<I>num_pixels</I> - <I>u</I>*<I>u</I>^T, where the size of  <I>R</I> is <I>num_bands</I> 
x <I>num_bands</I>. The singular value decomposition of <I>R</I> is <I>R</I> = <I>U</I>*<I>S</I>*<I>V</I>^T, where 
<I>U</I> is the transform matrix for the KLT (size <I>num_bands</I> x <I>num_bands</I>). <P>
The 
forward KLT transform is applied to the dataset in question using the 
transpose of the matrix <I>U</I>. Specifically, for a <I>num_bands</I> x 1 pixel vector 
<I>x</I>, the forward KLT is <I>y</I> = <I>U</I>^T*(<I>x</I> - <I>u</I>). The inverse KLT transform uses the 
matrix <I>U</I> directly; i.e., <I>x</I> = <I>U</I>*<I>y</I> + <I>u</I>. Here, <I>u</I> is the mean vector. <P>
In QccPack, 
<B><A HREF="QccHYPkltTrain.3.html">QccHYPkltTrain</B>(3)</A>
 determines the mean vector <I>u</I> and the transform matrix 
<I>U</I> given the set of pixel vectors in a hyperspectral image; <B><A HREF="QccHYPkltTrain.3.html">QccHYPkltTrain</B>(3)</A>
 
uses <B><A HREF="QccMatrixSVD.3.html">QccMatrixSVD</B>(3)</A>
 to perform the SVD of the covariance matrix. For application 
of the forward and inverse transforms to the  image cube, use <B><A HREF="QccHYPkltTransform.3.html">QccHYPkltTransform</B>(3)</A>
 
and <B><A HREF="QccHYPkltInverseTransform.3.html">QccHYPkltInverseTransform</B>(3)</A>
, respectively. <P>
The KLT is also called 
the Hotelling transform or principal component analysis (PCA). The name 
PCA is typically used when only a subset of transform coefficients (i.e., 
the principal components) is retained; that is, PCA typically refers to 
dimensionality reduction in addition to the spectral decorreltation inherent 
in the KLT.  
<H2><A NAME="sect7" HREF="#toc7">RETURN VALUE </A></H2>
These routines return 0 on success, and 1 on 
failure.  
<H2><A NAME="sect8" HREF="#toc8">SEE ALSO </A></H2>
<B><A HREF="QccHYPkltTrain.3.html">QccHYPkltTrain</B>(3)</A>
, <B><A HREF="QccHYPkltTransform.3.html">QccHYPkltTransform</B>(3)</A>
, <B><A HREF="QccHYPkltInverseTransform.3.html">QccHYPkltInverseTransform</B>(3)</A>
, 
<B><A HREF="QccMatrixSVD.3.html">QccMatrixSVD</B>(3)</A>
, <B><A HREF="QccIMGImageCube.3.html">QccIMGImageCube</B>(3)</A>
, <B><A HREF="QccPackHYP.3.html">QccPackHYP</B>(3)</A>
, <B><A HREF="QccPackIMG.3.html">QccPackIMG</B>(3)</A>
, <B><A HREF="QccPack.3.html">QccPack</B>(3)</A>
 
 
<H2><A NAME="sect9" HREF="#toc9">AUTHOR </A></H2>
Copyright (C) 1997-2016  James E. Fowler <P>
 <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">NAME</A></LI>
<LI><A NAME="toc1" HREF="#sect1">SYNOPSIS</A></LI>
<LI><A NAME="toc2" HREF="#sect2">DESCRIPTION</A></LI>
<LI><A NAME="toc3" HREF="#sect3">DATA STRUCTURE</A></LI>
<LI><A NAME="toc4" HREF="#sect4">FILE FORMAT</A></LI>
<LI><A NAME="toc5" HREF="#sect5">ROUTINES</A></LI>
<LI><A NAME="toc6" HREF="#sect6">THEORY</A></LI>
<LI><A NAME="toc7" HREF="#sect7">RETURN VALUE</A></LI>
<LI><A NAME="toc8" HREF="#sect8">SEE ALSO</A></LI>
<LI><A NAME="toc9" HREF="#sect9">AUTHOR</A></LI>
</UL>
<p><br><br><a href="http://sourceforge.net/projects/qccpack"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=5992&type=6" width="210" height="62" border="0" alt="Get QccPack at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a></body></html>
