<!-- manual page source format generated by PolyglotMan v3.0.4, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>QccENTArithmeticResetModel.3</TITLE>
</HEAD>
<BODY>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">NAME </A></H2>
QccENTArithmeticModel -  data structure  <B>QccENTArithmeticModel</B> for 
arithmetic encoding and decoding  
<H2><A NAME="sect1" HREF="#toc1">SYNOPSIS </A></H2>
<B>#include "libQccPack.h"</B>  <P>
<B>void 
QccENTArithmeticFreeModel(QccENTArithmeticModel *</B><I>model</I><B>);</B>  <BR>
<B>int QccENTArithmeticSetModelContext(QccENTArithmeticModel 
*</B><I>model</I><B>, int </B><I>current_context</I><B>);</B>  <BR>
<B>void QccENTArithmeticSetModelAdaption(QccENTArithmeticModel 
*</B><I>model</I><B>, int </B><I>adaptive</I><B>);</B>  <BR>
<B>int QccENTArithmeticSetModelProbabilities(QccENTArithmeticModel 
*</B><I>model</I><B>, double *</B><I>probabilities</I><B>, int </B><I>context</I><B>);</B>  <BR>
<B>int QccENTArithmeticResetModel(QccENTArithmeticModel 
*</B><I>model</I><B>, int </B><I>context</I><B>);</B>  
<H2><A NAME="sect2" HREF="#toc2">DESCRIPTION </A></H2>
QccPack provides data structure <B>QccENTArithmeticModel</B> 
for representing the arithmetic-coding model to use in arithmetic encoding 
and decoding. <P>
<B>CAVEAT:</B> The <B>QccENTArithmeticModel</B> data structure contains 
a number of variables and arrays which are used internally in the arithmetic 
encoding and decoding routines; these variables and arrays are described 
briefly below, but they should <I>under</I> no circumstances be accessed or modified 
by the user directly, as this will likely result in erroneous operation 
of the coder. Users who are interested in modifying the internal structure 
of the QccPack arithmetic-coder code should consult the paper by Witten 
et al. for details on the internal operation of the QccPack arithmetic 
coder and a thorough description of the variables and arrays internal 
to the <B>QccENTArithmeticModel</B> structure.  
<H2><A NAME="sect3" HREF="#toc3">DATA STRUCTURE </A></H2>
The <B>QccENTArithmeticModel</B> 
data structure is defined as:  <blockquote><P>
 typedef struct <BR>
 { <BR>
   int num_contexts; 
<BR>
   int *num_symbols; <BR>
   int **translate_symbol_to_index; <BR>
   int **translate_index_to_symbol; 
<BR>
   int **cumulative_frequencies; <BR>
   int **frequencies; <BR>
   QccENTCodeValue 
low, high; <BR>
   long bits_to_follow; <BR>
   int garbage_bits; <BR>
   int target_num_bits; 
<BR>
   int adaptive_model; <BR>
   QccENTArithmeticGetContext context_function; 
<BR>
   int current_context; <BR>
   QccENTCodeValue current_code_value; <BR>
 } QccENTArithmeticModel; 
<BR>
  </blockquote>
<P>
The fields of <B>QccENTArithmeticModel</B> are as follows: 
<DL>

<DT><I>num_contexts</I>  </DT>
<DD>The 
total number of contexts. </DD>

<DT><I>num_symbols</I>  </DT>
<DD>An array of <I>num_contexts</I> entries, 
with each entry providing the number of symbols in the corresponding context. 
</DD>

<DT><I>translate_symbol_to_index</I>, <I>translate_index_to_symbol</I>  </DT>
<DD>Internal arrays 
for translating between symbols and internal symbol indices. See Witten 
et al. </DD>

<DT><I>cumulative_frequencies</I>, <I>frequencies</I>  </DT>
<DD>Together these arrays provide 
the probabilities and cumulative probabilities for the symbols in each 
context, expressed for practical reasons as integer frequencies. See Witten 
et al. </DD>

<DT><I>low</I>, <I>high</I>, <I>bit_to_follow</I>, <I>current_code_value</I>  </DT>
<DD>Internal storage for 
the current code value and known range. See Witten et al. </DD>

<DT><I>target_num_bits</I> 
 </DT>
<DD>The total number of desired bits to be read  by the arithmetic decoder; 
useful for decoding the bitstream from packets with known sizes. A value 
of <B>QCCENT_ANYNUMBITS</B> indicates that there is no packet-length constraint; 
i.e., the decoder reads symbols until it reaches the end of the bitstream 
or the EOF symbol output by <B><A HREF="QccENTArithmeticEncodeEnd.3.html">QccENTArithmeticEncodeEnd</B>(3)</A>
. </DD>

<DT><I>garbage_bits</I> 
 </DT>
<DD>The number of bits the decoder has read beyond <I>target_num_bits</I> (or beyond 
the end of the file if <I>target_num_bits</I> is <B>QCCENT_ANYNUMBITS</B>) while attempting 
to decode the last symbol; needed since  the decoder reads bits from the 
bitstream in advance of symbol output. </DD>

<DT><I>adaptive_model</I>  </DT>
<DD>Indicates whether 
adaption in the model is currently turned on or off; i.e., whether the model 
is adaptive or nonadaptive. In an adaptive model, symbol frequency counts 
are updated each time a symbol is coded. In a nonadaptive model, symbol 
frequency counts are not changed except through explicit setting of the 
frequency counts. Use <B><A HREF="QccENTArithmeticSetModelAdaption.3.html">QccENTArithmeticSetModelAdaption</B>(3)</A>
 to change the 
state of adaption in the model, and <B><A HREF="QccENTArithmeticSetModelProbabilities.3.html">QccENTArithmeticSetModelProbabilities</B>(3)</A>
 
to explicit chage frequency counts in a nonadaptive model. The model is 
initially created as an adaptive model. </DD>

<DT><I>context_function</I>  </DT>
<DD>A function that 
returns the current context to be used in coding when <I>num_contexts</I> is 
greater than 1. <I>context_function</I> can be  <B>NULL</B> in which case the current 
context is retrieved from the <I>current_context</I> field of the model. See <B><A HREF="QccENTArithmeticGetContext.3.html">QccENTArithmeticGetContext</B>(3)</A>
. 
</DD>

<DT><I>current_context</I>  </DT>
<DD>If <I>context_function</I> is  <B>NULL</B>, the current context to 
be used in coding is retrieved from the <I>current_context</I> field of the arithmetic-model 
structure. User routines may set this field by calling <B><A HREF="QccENTArithmeticSetModelContext.3.html">QccENTArithmeticSetModelContext</B>(3)</A>
 
before calling routines such as <B><A HREF="QccENTArithmeticEncode.3.html">QccENTArithmeticEncode</B>(3)<B></B></A>
 and <B><A HREF="QccENTArithmeticDecode.3.html">QccENTArithmeticDecode</B>(3)</A>
. 
</DD>
</DL>
 
<H2><A NAME="sect4" HREF="#toc4">ROUTINES </A></H2>
<B>QccENTArithmeticFreeModel()</B> frees all the arrays contained in 
<I>model</I> as well as  <I>model</I> itself. <B>QccENTArithmeticFreeModel()</B> should be called 
after <B><A HREF="QccENTArithmeticEncodeEnd.3.html">QccENTArithmeticEncodeEnd</B>(3)</A>
 or <B><A HREF="QccENTArithmeticDecode.3.html">QccENTArithmeticDecode</B>(3)</A>
 to get 
rid of the <B>QccENTArithmeticModel</B> structure that has been used for encoding 
and decoding, when one is done encoding or decoding. <P>
<B>QccENTArithmeticSetModelContext()</B> 
sets the current-context field of <I>model</I> to <I>current_context</I>. <I>current_context</I> 
must be greater than or equal to zero, and less than or equal to <I>model-&gt;num_contexts</I>. 
<B>QccENTArithmeticSetModelContext()</B> returns 0 on success, or 1 if  <I>current_context</I> 
is an invalid context number. <P>
<B>QccENTArithmeticSetModelAdaption()</B> changes 
the adaption state of the model. If <I>adaptive</I> is <B>QCCENT_NONADAPTIVE</B>, the 
model is made nonadaptive; otherwise, if <I>adaptive</I> is <B>QCCENT_ADAPTIVE</B>, 
the model becomes adaptive. The adaption mode of the model can be changed 
at any time during encoding, as long as the same changes to the adaption 
state are made during decoding as well. When <I>model</I> is initially created, 
the model is set to be adaptive. <P>
<B>QccENTArithmeticSetModelProbabilities()</B> 
can be use to manually set the frequency counts in a particular <I>context</I> 
in a nonadaptive <I>model</I> according to any desired probability distribution. 
<I>probabilities</I> is a list of probability values, double-precision floating 
point numbers each greater than or equal to 0.0 and less than or equal 
to 1.0. There should be as many values in <I>probabilities</I> as there are symbols 
in <I>context</I> (not including the EOF symbol automatically added to the context 
during the call to <B><A HREF="QccENTArithmeticCreateModel.3.html">QccENTArithmeticCreateModel</B>(3)</A>
; the frequency of the 
EOF symbol is set to automatically set to 1 by <B>QccENTArithmeticSetModelProbabilities()</B>). 
Additionally, the probability values should form a valid probability mass 
function; i.e., they should sum to 1.0. <B>QccENTArithmeticSetModelProbabilities()</B> 
updates <I>model-&gt;cumulative_frequencies</I> and <I>model-&gt;frequencies</I> to approximate 
the distribution specified by <I>probabilities</I>. <B>QccENTArithmeticSetModelProbabilities()</B> 
returns in error if  <I>model</I> is not nonadaptive. <P>
<B>QccENTArithmeticResetModel()</B> 
manually resets the frequency counts in a particular <I>context</I> back to their 
initial values; i.e., all frequency counts in the <I>context</I> are set to 1. Unlike 
<B>QccENTArithmeticSetModelProbabilities()</B>, <I>model</I> may be either adaptive 
or nonadaptive.  
<H2><A NAME="sect5" HREF="#toc5">SEE ALSO </A></H2>
<B><A HREF="QccENTArithmeticEncode.3.html">QccENTArithmeticEncode</B>(3)</A>
, <B><A HREF="QccENTArithmeticEncodeStart.3.html">QccENTArithmeticEncodeStart</B>(3)</A>
, 
<B><A HREF="QccENTArithmeticEncodeEnd.3.html">QccENTArithmeticEncodeEnd</B>(3)</A>
, <B><A HREF="QccENTArithmeticDecode.3.html">QccENTArithmeticDecode</B>(3)</A>
, <B><A HREF="QccENTArithmeticDecodeStart.3.html">QccENTArithmeticDecodeStart</B>(3)</A>
, 
<B><A HREF="QccENTArithmeticDecodeRestart.3.html">QccENTArithmeticDecodeRestart</B>(3)</A>
, <B><A HREF="QccENTArithmeticGetContext.3.html">QccENTArithmeticGetContext</B>(3)</A>
, <B><A HREF="QccPackENT.3.html">QccPackENT</B>(3)</A>
, 
<B><A HREF="QccPack.3.html">QccPack</B>(3)</A>
 <P>
I. H. Witten, R. M. Neal, and J. G. Cleary, "Arithmetic Coding for 
Data Compression," <I>Communications of the ACM</I>, vol. 30, no. 6, pp. 520-540, 
June 1987.  
<H2><A NAME="sect6" HREF="#toc6">AUTHOR </A></H2>
Copyright (C) 1997-2016  James E. Fowler <P>
  <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">NAME</A></LI>
<LI><A NAME="toc1" HREF="#sect1">SYNOPSIS</A></LI>
<LI><A NAME="toc2" HREF="#sect2">DESCRIPTION</A></LI>
<LI><A NAME="toc3" HREF="#sect3">DATA STRUCTURE</A></LI>
<LI><A NAME="toc4" HREF="#sect4">ROUTINES</A></LI>
<LI><A NAME="toc5" HREF="#sect5">SEE ALSO</A></LI>
<LI><A NAME="toc6" HREF="#sect6">AUTHOR</A></LI>
</UL>
<p><br><br><a href="http://sourceforge.net/projects/qccpack"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=5992&type=6" width="210" height="62" border="0" alt="Get QccPack at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a></body></html>
