<!-- manual page source format generated by PolyglotMan v3.0.4, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>QccIMGImageDPCMDecode.3</TITLE>
</HEAD>
<BODY>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">NAME </A></H2>
QccIMGImageComponentDPCMEncode, QccIMGImageComponentDPCMDecode, 
QccIMGImageDPCMEncode, QccIMGImageDPCMDecode -  DPCM encoding and decoding 
of images and image components  
<H2><A NAME="sect1" HREF="#toc1">SYNOPSIS </A></H2>
<B>#include "libQccPack.h"</B>  <P>
<B>int QccIMGImageComponentDPCMEncode(const 
QccIMGImageComponent *</B><I>image_component</I><B>, const QccSQScalarQuantizer *</B><I>quantizer</I><B>, 
double </B><I>out_of_bound_value</I><B>, int </B><I>predictor_code</I><B>, QccIMGImageComponent *</B><I>difference_image</I><B>, 
QccChannel *</B><I>channel</I><B>);</B>  <BR>
<B>int QccIMGImageComponentDPCMDecode(QccChannel *</B><I>channel</I><B>, 
const QccSQScalarQuantizer *</B><I>quantizer</I><B>, double </B><I>out_of_bound_value</I><B>, int 
</B><I>predictor_code</I><B>, QccIMGImageComponent *</B><I>image_component</I><B>);</B>  <BR>
 <P>
<B>int QccIMGImageDPCMEncode(const 
QccIMGImage *</B><I>image</I><B>, const QccSQScalarQuantizer *</B><I>quantizers</I><B>, const QccVector 
</B><I>out_of_bound_values</I><B>, int </B><I>predictor_code</I><B>, QccIMGImage *</B><I>difference_image</I><B>, 
QccChannel *</B><I>channels</I><B>);</B>  <BR>
<B>int QccIMGImageDPCMDecode(QccChannel *</B><I>channels</I><B>, 
const QccSQScalarQuantizer *</B><I>quantizers</I><B>, const QccVector </B><I>out_of_bound_values</I><B>, 
int </B><I>predictor_code</I><B>, QccIMGImage *</B><I>image);</I>  
<H2><A NAME="sect2" HREF="#toc2">DESCRIPTION </A></H2>
<I>QccIMGImageComponentDPCMEncode()</I> 
and <I>QccIMGImageComponentDPCMDecode()</I> implement differential pulse-code 
modulation (DPCM) of an <I>image_component</I>. In essence, DPCM encoding consists 
of making a prediction of the current pixel, subtracting the prediction 
from the current pixel, and scalar-quantizing the resulting difference 
value to produce a quantization index. This procedure is repeated in a 
raster-scan fashion throughout the image. DPCM decoding reverses the procedure 
by inverse scalar-quantizing the index to produce a reconstructed difference 
and then adding this reconstructed difference to a prediction to reconstruct 
the current pixel. See "PREDICTION" below for more detail on the predictors 
used in the DPCM encoder and decoder. <P>
<I>QccIMGImageComponentDPCMEncode()</I> 
encodes <I>image_component</I> with DPCM using the predictor specified by <I>predictor_code</I>, 
quantizing difference values with <I>quantizer</I>, and outputting the resulting 
quantizer indices to <I>channel</I>. <I><A HREF="QccChannelNormalize.3.html">QccChannelNormalize</I>(3)</A>
 is called if the quantization 
indices consist of both positive and negative numbers, which is the case 
unless <I>quantizer-&gt;type</I> is <B>QCCSQSCALARQUANTIZER_GENERAL</B>. If <I>difference_image</I> 
is  non-<B>NULL</B>, the image of difference values is returned. <I>channel</I> must be 
allocated with sufficient storage space to hold all the quantizer indices 
(i.e., one for each pixel in <I>image_component</I>) prior to calling <B>QccIMGImageComponentDPCMEncode()</B>. 
<P>
<B>QccIMGImageComponentDPCMDecode()</B> decodes the <I>channel</I> produced by <B>QccIMGImageComponentDPCMEncode()</B>, 
reconstructing <I>image_component</I>. For sane results, <I>predictor_code</I>, <I>out_of_bound_value</I>, 
and <I>quantizer</I> must be the same as those used by <B>QccIMGImageComponentDPCMEncode()</B>. 
<I>image_component</I> must be allocated prior to calling <B>QccIMGImageComponentDPCMDecode()</B>. 
<P>
<B>QccIMGImageDPCMEncode()</B> and <B>QccIMGImageDPCMDecode()</B> implement DPCM encoding 
and decoding, respectively, for <I>image</I>. Essentially, <B>QccIMGImageDPCMEncode()</B> 
calls <B>QccIMGImageComponentDPCMEncode()</B> for each of the <I>Y</I>, <I>U</I>, and <I>V</I> image 
components of <I>image</I>. <I>out_of_bound_values</I> is a vector of three values to 
use in the predictor, <I>quantizers</I> is an array of three quantizers to apply 
to the prediction residuals, and  <I>channels</I> is an array of three channels 
used to store the quantization indices for each of the three components. 
Similarly, <B>QccIMGImageDPCMDecode()</B> calls <B>QccIMGImageComponentDPCMDecode()</B> 
for each of the <I>Y</I>, <I>U</I>, and <I>V</I> image components of <I>image</I>.  
<H2><A NAME="sect3" HREF="#toc3">PREDICTION </A></H2>
For 
best performance,  it is necessary for the DPCM encoder and decoder to 
stay synchronized throughout the coding of an image component. Thus, the 
encoder and decoder must use exactly the same predictions. Consequently, 
both the encoder and decoder calculate a prediction of the current pixel 
based on previously encoded and reconstructed pixels in the causal neighborhood 
surrounding the current pixel in the raster scan. <P>
Jain identifies six linear 
predictors as being particularly useful for image coding. These predictors 
use four pixels <I>A</I>,<I> B</I>,<I> C</I>, and <I>D</I> in the causal neighborhood surrounding 
current pixel <I>X</I> as illustrated below. <P>
 previous line    ... *   *   *   <I>B</I> 
  <I>C</I>   <I>D</I>   *   *   * ...<I></I>  current line    ... *   *   *   <I>A</I>   <I>X</I>   -   -   -   - ...<I></I> 
    next line    ... -   -   -   -   -   -   -   -   - ... <BR>
 <P>
 <I></I>         *: previously encoded 
pixels <I></I>         -: pixels not yet encoded <I>A</I>, <I>B</I>, <I>C</I>, <I>D</I>: previously encoded 
pixels used by predictor <I>         X</I>: current pixel (to be predicted) <P>
 
The different predictors, specified by <I>predictor_code</I> in these routines, 
are as follows, where <I>P</I> is the predicted value of the current pixel, <I>X</I>. 

<DL>

<DT>Predictor code: 0  </DT>
<DD><I>P</I> = <I>A</I> </DD>

<DT>Predictor code: 1  </DT>
<DD><I>P</I> = (<I>A</I> + <I>D</I>) / 2 </DD>

<DT>Predictor 
code: 2  </DT>
<DD><I>P</I> = (<I>A</I> + <I>C</I>) / 2 </DD>

<DT>Predictor code: 3  </DT>
<DD><I>P</I> = ((<I>A</I> + (<I>C</I> + <I>D</I>)/2) / 2) 
</DD>

<DT>Predictor code: 4  </DT>
<DD><I>P</I> = <I>A</I> + (<I>C</I> - <I>B</I>) </DD>

<DT>Predictor code: 5  </DT>
<DD><I>P</I> = <I>A</I> + (<I>D</I> - <I>B</I>)/2 
</DD>
</DL>
<P>
In the event that the current pixel is close to the boundaries of the 
image component, one or more of the <I>A</I>,<I> B</I>,<I> C</I>, or <I>D</I> pixels may not be available 
for these predictors. In this case, the predictor substitutes <I>out_of_bound_value</I> 
for the missing pixel in the prediction formula.  
<H2><A NAME="sect4" HREF="#toc4">RETURN VALUE </A></H2>
These routines 
return 0 on success, 1 on failure.  
<H2><A NAME="sect5" HREF="#toc5">SEE ALSO </A></H2>
<B><A HREF="QccSQScalarQuantization.3.html">QccSQScalarQuantization</B>(3)</A>
, 
<B><A HREF="QccChannelNormalize.3.html">QccChannelNormalize</B>(3)</A>
, <B><A HREF="QccIMGImageComponent.3.html">QccIMGImageComponent</B>(3)</A>
, <B><A HREF="QccIMGImage.3.html">QccIMGImage</B>(3)</A>
, <B><A HREF="QccChannel.3.html">QccChannel</B>(3)</A>
, 
<B><A HREF="QccPackIMG.3.html">QccPackIMG</B>(3)</A>
, <B><A HREF="QccPack.3.html">QccPack</B>(3)</A>
 <P>
 A. K. Jain, <I>Fundamentals of Digital Image Processing</I>. 
Englewood Cliffs, NJ: Prentice Hall, 1989. <P>
  
<H2><A NAME="sect6" HREF="#toc6">AUTHOR </A></H2>
Copyright (C) 1997-2016 
 James E. Fowler  <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">NAME</A></LI>
<LI><A NAME="toc1" HREF="#sect1">SYNOPSIS</A></LI>
<LI><A NAME="toc2" HREF="#sect2">DESCRIPTION</A></LI>
<LI><A NAME="toc3" HREF="#sect3">PREDICTION</A></LI>
<LI><A NAME="toc4" HREF="#sect4">RETURN VALUE</A></LI>
<LI><A NAME="toc5" HREF="#sect5">SEE ALSO</A></LI>
<LI><A NAME="toc6" HREF="#sect6">AUTHOR</A></LI>
</UL>
<p><br><br><a href="http://sourceforge.net/projects/qccpack"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=5992&type=6" width="210" height="62" border="0" alt="Get QccPack at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a></body></html>
